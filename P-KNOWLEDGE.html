<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心愈伴 - 心理知识</title>
    <script src="https://unpkg.byted-static.com/coze/space_ppt_lib/1.0.3-alpha.12/lib/tailwindcss.js"></script>
    <script src="https://unpkg.byted-static.com/fortawesome/fontawesome-free/6.7.2/js/all.min.js" data-auto-replace-svg="nest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        tertiary: '#06b6d4',
                        success: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b',
                        info: '#3b82f6',
                        'glass-bg': 'rgba(255, 255, 255, 0.1)',
                        'glass-border': 'rgba(255, 255, 255, 0.2)',
                        'dark-glass': 'rgba(0, 0, 0, 0.1)',
                    },
                    backdropBlur: {
                        'xs': '2px',
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                        'glass-inset': 'inset 0 1px 0 0 rgba(255, 255, 255, 0.05)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .glass-nav {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-button {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .glass-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.4);
        }
        
        .glass-input {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
        }
        
        .gradient-text {
            background: linear-gradient(45deg, #ffffff, #e5e7eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .category-active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        .category-inactive {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .search-results-enter {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .search-results-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="font-sans text-white overflow-x-hidden">
    <!-- iOS状态栏 -->
    <div id="status-bar" class="flex justify-between items-center px-6 py-2 text-sm font-medium">
        <div class="flex items-center space-x-1">
            <span>9:41</span>
        </div>
        <div class="flex items-center space-x-1">
            <i class="fas fa-signal text-xs"></i>
            <i class="fas fa-wifi text-xs"></i>
            <div class="w-6 h-3 border border-white rounded-sm">
                <div class="w-4 h-1.5 bg-white rounded-sm m-0.5"></div>
            </div>
        </div>
    </div>

    <!-- 主要内容区域 -->
    <div id="main-content" class="px-4 pb-6">
        <!-- 顶部导航栏 -->
        <header id="top-nav" class="flex items-center py-4 mb-6">
            <button id="back-btn" class="mr-4 p-2 glass-button rounded-full hover:scale-105 transition-transform">
                <i class="fas fa-arrow-left text-lg"></i>
            </button>
            <h1 id="page-title" class="text-xl font-semibold gradient-text flex-1">心理知识</h1>
        </header>

        <!-- 搜索框 -->
        <section id="search-section" class="mb-6">
            <div class="relative">
                <input 
                    type="text" 
                    id="search-input" 
                    placeholder="搜索心理知识文章..." 
                    class="w-full px-4 py-3 pl-12 glass-input rounded-2xl text-white placeholder-white/60 focus:ring-2 focus:ring-white/20 transition-all"
                >
                <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-white/60"></i>
                <button id="search-clear-btn" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white/60 hidden">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </section>

        <!-- 分类标签 -->
        <section id="category-section" class="mb-6">
            <div class="flex space-x-3 overflow-x-auto pb-2">
                <button id="category-all" class="category-active px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    全部
                </button>
                <button id="category-emotion" class="category-inactive px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    情绪管理
                </button>
                <button id="category-stress" class="category-inactive px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    压力缓解
                </button>
                <button id="category-relationship" class="category-inactive px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    人际关系
                </button>
                <button id="category-love" class="category-inactive px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    恋爱心理
                </button>
                <button id="category-career" class="category-inactive px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    职业心理
                </button>
                <button id="category-sleep" class="category-inactive px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all">
                    睡眠改善
                </button>
            </div>
        </section>

        <!-- 搜索结果区域 -->
        <section id="search-results" class="mb-6 hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 id="search-results-title" class="text-lg font-semibold gradient-text">搜索结果</h2>
                <span id="search-results-count" class="text-sm text-white/70">找到 0 篇文章</span>
            </div>
            <div id="search-results-list" class="space-y-3">
                <!-- 搜索结果将动态插入这里 -->
            </div>
        </section>

        <!-- 文章列表 -->
        <section id="articles-section">
            <div class="flex justify-between items-center mb-4">
                <h2 id="articles-title" class="text-lg font-semibold gradient-text">精选文章</h2>
                <span id="articles-count" class="text-sm text-white/70">共 24 篇文章</span>
            </div>
            <div id="articles-list" class="space-y-4">
                <!-- 文章列表将动态生成 -->
            </div>
        </section>

        <!-- 加载更多 -->
        <div id="load-more-section" class="text-center mt-6">
            <button id="load-more-btn" class="glass-button px-6 py-3 rounded-2xl text-white font-medium hover:scale-105 transition-transform">
                <i class="fas fa-spinner fa-spin mr-2 hidden" id="load-more-spinner"></i>
                加载更多
            </button>
        </div>
    </div>

    <script>
        // 模拟文章数据
        const articlesData = [
            {
                id: 'article1',
                title: '如何有效管理负面情绪：实用技巧与方法',
                summary: '学会识别和管理负面情绪是心理健康的重要组成部分。本文介绍了多种实用的情绪调节技巧...',
                category: '情绪管理',
                publishDate: '2024-01-15',
                readCount: 1245,
                image: 'https://s.coze.cn/image/udHTplGguVg/',
                categoryId: 'emotion'
            },
            {
                id: 'article2',
                title: '职场压力缓解指南：平衡工作与生活的艺术',
                summary: '现代职场竞争激烈，压力成为常态。了解压力来源，掌握科学的缓解方法，让工作更高效，生活更美好...',
                category: '压力缓解',
                publishDate: '2024-01-12',
                readCount: 892,
                image: 'https://s.coze.cn/image/PnKcTwVponA/',
                categoryId: 'stress'
            },
            {
                id: 'article3',
                title: '建立健康人际关系的五个关键要素',
                summary: '良好的人际关系是幸福生活的基石。从沟通技巧到边界设定，全方位提升你的人际交往能力...',
                category: '人际关系',
                publishDate: '2024-01-10',
                readCount: 1567,
                image: 'https://s.coze.cn/image/CE4_Qb0aISY/',
                categoryId: 'relationship'
            },
            {
                id: 'article4',
                title: '恋爱心理学：如何建立深度亲密关系',
                summary: '从心理学角度解析恋爱关系的建立与维护，帮助你在爱情中找到真正的幸福...',
                category: '恋爱心理',
                publishDate: '2024-01-08',
                readCount: 2034,
                image: 'https://s.coze.cn/image/KM3QjlqYmb0/',
                categoryId: 'love'
            },
            {
                id: 'article5',
                title: '职业倦怠的预防与应对策略',
                summary: '职业倦怠是现代职场常见问题。学会识别早期信号，采取有效措施，重燃工作热情...',
                category: '职业心理',
                publishDate: '2024-01-05',
                readCount: 987,
                image: 'https://s.coze.cn/image/EmxC0HmmtzE/',
                categoryId: 'career'
            },
            {
                id: 'article6',
                title: '改善睡眠质量的科学方法与习惯养成',
                summary: '高质量的睡眠对身心健康至关重要。了解睡眠机制，建立健康的睡眠习惯...',
                category: '睡眠改善',
                publishDate: '2024-01-03',
                readCount: 1654,
                image: 'https://s.coze.cn/image/0og_2YoFpfY/',
                categoryId: 'sleep'
            }
        ];

        let currentCategory = 'all';
        let searchQuery = '';
        let currentPage = 1;
        const pageSize = 6;

        document.addEventListener('DOMContentLoaded', function() {
            // 渲染文章列表
            renderArticles();

            // 返回按钮点击事件
            document.querySelector('#back-btn').addEventListener('click', function() {
                window.location.href = 'P-HOME.html';
            });

            // 搜索输入事件
            document.querySelector('#search-input').addEventListener('input', function() {
                searchQuery = this.value.trim();
                const clearBtn = document.querySelector('#search-clear-btn');
                
                if (searchQuery) {
                    clearBtn.classList.remove('hidden');
                    performSearch();
                } else {
                    clearBtn.classList.add('hidden');
                    hideSearchResults();
                    renderArticles();
                }
            });

            // 清除搜索按钮
            document.querySelector('#search-clear-btn').addEventListener('click', function() {
                document.querySelector('#search-input').value = '';
                searchQuery = '';
                this.classList.add('hidden');
                hideSearchResults();
                renderArticles();
            });

            // 分类标签点击事件
            const categoryBtns = document.querySelectorAll('[id^="category-"]');
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 移除所有活跃状态
                    categoryBtns.forEach(b => {
                        b.classList.remove('category-active');
                        b.classList.add('category-inactive');
                    });
                    
                    // 设置当前活跃状态
                    this.classList.remove('category-inactive');
                    this.classList.add('category-active');
                    
                    // 更新当前分类
                    currentCategory = this.id.replace('category-', '');
                    currentPage = 1;
                    
                    // 隐藏搜索结果，显示文章列表
                    hideSearchResults();
                    renderArticles();
                });
            });

            // 加载更多按钮
            document.querySelector('#load-more-btn').addEventListener('click', function() {
                const spinner = document.querySelector('#load-more-spinner');
                this.disabled = true;
                spinner.classList.remove('hidden');
                
                setTimeout(() => {
                    currentPage++;
                    renderArticles(true);
                    this.disabled = false;
                    spinner.classList.add('hidden');
                }, 1000);
            });
        });

        // 渲染文章列表
        function renderArticles(append = false) {
            const articlesList = document.querySelector('#articles-list');
            const articlesCount = document.querySelector('#articles-count');
            
            if (!append) {
                articlesList.innerHTML = '';
            }
            
            // 筛选文章
            let filteredArticles = articlesData;
            
            if (currentCategory !== 'all') {
                filteredArticles = filteredArticles.filter(article => 
                    article.categoryId === currentCategory
                );
            }
            
            // 计算分页
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const pageArticles = filteredArticles.slice(startIndex, endIndex);
            
            // 渲染文章
            pageArticles.forEach(article => {
                const articleElement = createArticleElement(article);
                articlesList.appendChild(articleElement);
            });
            
            // 更新文章数量
            articlesCount.textContent = `共 ${filteredArticles.length} 篇文章`;
            
            // 隐藏/显示加载更多按钮
            const loadMoreBtn = document.querySelector('#load-more-btn');
            if (endIndex >= filteredArticles.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'inline-block';
            }
        }

        // 创建文章元素
        function createArticleElement(article) {
            const articleDiv = document.createElement('div');
            articleDiv.className = 'glass-card rounded-2xl p-4 hover:scale-105 transition-transform cursor-pointer';
            articleDiv.id = `article-card-${article.id}`;
            
            articleDiv.innerHTML = `
                <div class="flex space-x-4">
                    <img src="${article.image}" alt="${article.title}" 
                         class="w-20 h-20 rounded-xl object-cover" data-category="商业科技">
                    <div class="flex-1">
                        <h3 class="font-semibold text-white mb-2 line-clamp-2">${article.title}</h3>
                        <p class="text-sm text-white/70 mb-3 line-clamp-2">${article.summary}</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-4 text-xs text-white/60">
                                <span class="flex items-center">
                                    <i class="fas fa-calendar-alt mr-1"></i>
                                    ${article.publishDate}
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-eye mr-1"></i>
                                    ${article.readCount}
                                </span>
                            </div>
                            <span class="px-2 py-1 bg-white/20 rounded-full text-xs">${article.category}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // 添加点击事件
            articleDiv.addEventListener('click', function() {
                window.location.href = `P-ARTICLE_DETAIL.html?articleId=${article.id}`;
            });
            
            return articleDiv;
        }

        // 执行搜索
        function performSearch() {
            const searchResults = document.querySelector('#search-results');
            const searchResultsList = document.querySelector('#search-results-list');
            const searchResultsCount = document.querySelector('#search-results-count');
            const articlesSection = document.querySelector('#articles-section');
            
            // 隐藏文章列表，显示搜索结果
            articlesSection.classList.add('hidden');
            searchResults.classList.remove('hidden');
            
            // 搜索文章
            const results = articlesData.filter(article => 
                article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                article.summary.toLowerCase().includes(searchQuery.toLowerCase()) ||
                article.category.toLowerCase().includes(searchQuery.toLowerCase())
            );
            
            // 更新搜索结果计数
            searchResultsCount.textContent = `找到 ${results.length} 篇文章`;
            
            // 渲染搜索结果
            searchResultsList.innerHTML = '';
            results.forEach(article => {
                const articleElement = createArticleElement(article);
                searchResultsList.appendChild(articleElement);
            });
            
            // 添加进入动画
            const resultElements = searchResultsList.querySelectorAll('.glass-card');
            resultElements.forEach((element, index) => {
                element.classList.add('search-results-enter');
                setTimeout(() => {
                    element.classList.add('search-results-enter-active');
                }, index * 100);
            });
        }

        // 隐藏搜索结果
        function hideSearchResults() {
            const searchResults = document.querySelector('#search-results');
            const articlesSection = document.querySelector('#articles-section');
            
            searchResults.classList.add('hidden');
            articlesSection.classList.remove('hidden');
        }
    </script>
</body>
</html>